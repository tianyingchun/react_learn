(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Created by Sandeep on 06/10/14.
 */

var Reflux = require('reflux');

var NoteActions = Reflux.createActions([
	'createNote',
	'editNote'
]);

module.exports = NoteActions;

},{"reflux":"reflux"}],2:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

/**
 *
 * It uses `<NoteApp/>` to render the app on the server. You can create isomorphic apps by rendering React on both Server
 * and Client.
 */

// for ie8 Polyfills, but we should't require it in projecet
// we should use grunt task to build ie8fix modules
// require('es5-shim/es5-shim');
// require('es5-shim/es5-sham');
// require('console-polyfill');

var React = require('react');
var NoteApp = require('./components/NoteApp.jsx');
var App = React.createClass({displayName: "App",
    render: function() {
        return (
            React.createElement("html", null, 
                React.createElement("head", {lang: "en"}, 
                    React.createElement("base", {href: "/"}), 
                    React.createElement("meta", {charSet: "utf-8"}), 
                    React.createElement("meta", {httpEquiv: "X-UA-Compatible", content: "IE=edge"}), 
                    React.createElement("meta", {name: "viewport", content: "width=device-width, initial-scale=1"}), 
                    React.createElement("title", null, "React Note app"), 
                    React.createElement("link", {href: "css/bootstrap.css", rel: "stylesheet"}), 
                    React.createElement("link", {href: "css/app.css", rel: "stylesheet"})
                ), 
                React.createElement("body", null, 
                    React.createElement(NoteApp, null), 
                    React.createElement("script", {type: "text/javascript", src: "/js/vendor/react.ie8fix.js"}), 
                    React.createElement("script", {type: "text/javascript", src: "/js/vendor/react.js"}), 
                    React.createElement("script", {type: "text/javascript", src: "/js/browserify/bundle.js"})
                )
            )
        );
    }
});


module.exports = App;
},{"./components/NoteApp.jsx":5,"react":"react"}],3:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

/**
 *  For rendering the app on client side.
 */
var React = require('react');
var App = require('./App.jsx');

if (typeof window !== 'undefined') {
    window.onload = function() {
        React.render(React.createElement(App, null), document);
    };
}

},{"./App.jsx":2,"react":"react"}],4:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

var React = require('react');

var Note = React.createClass({displayName: "Note",
    propTypes: {
        active: React.PropTypes.bool,
        note: React.PropTypes.object,
        onEdit: React.PropTypes.func,
        onSelect: React.PropTypes.func
    },
    handleEdit: function(id, event){
        event.preventDefault();
        this.props.onEdit(id);
        this.props.onSelect(id);
    },

    render: function() {

        var note = this.props.note;

        var title = note.text.length >= 20 ? note.text.substring(0, 20) : note.text;

        var className = this.props.active ? 'active' : null;

        return (
            React.createElement("a", {href: "#", className: 'list-group-item ' + className, onClick: this.handleEdit.bind(null, note._id)}, title)
        );
    }
});

module.exports = Note;
},{"react":"react"}],5:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

var React = require('react');
var NoteListBox = require('./NoteListBox.jsx');
var NoteCreationBox = require('./NoteCreationBox.jsx');
var Render = require('./Render.jsx');
var NoteApp = React.createClass({displayName: "NoteApp",

    getInitialState: function() {
        return {
            id: null
        };
    },

    onEdit: function(id){
        this.setState({
            currentlyEdited: id
        });
    },

    onAdd: function(){
        this.setState({
            currentlyEdited: null
        });
    },

    render: function() {
        return (
            React.createElement("div", {className: "container"}, 
                React.createElement("div", {className: "row header"}, 
                    React.createElement("div", {className: "page-header"}, 
                        React.createElement("h1", null, "React Note App"), 
                        React.createElement(Render, null)
                    )
                ), 
                React.createElement("div", {className: "row"}, 
                    React.createElement(NoteListBox, {onEdit: this.onEdit, onAdd: this.onAdd}), 
                    React.createElement(NoteCreationBox, {id: this.state.currentlyEdited})
                )
            )
        );
    }
});

module.exports = NoteApp;

},{"./NoteCreationBox.jsx":6,"./NoteListBox.jsx":8,"./Render.jsx":9,"react":"react"}],6:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

var React = require('react');
var TextArea = require('./TextArea.jsx');
var NoteActions = require('../../actions/NoteActions.js');
var NoteStore = require('../../stores/NoteStore.js');

var NoteCreationBox = React.createClass({displayName: "NoteCreationBox",

    propTypes: {
        id: React.PropTypes.number
    },
    handleSave: function(noteText, id) {

        if (id) {
            NoteActions.editNote({
                _id: id,
                text: noteText
            });
        } else {
            NoteActions.createNote({
                _id: Date.now(),
                text: noteText
            });
        }
    },
    render: function() {

        var note;

        if(this.props.id) {
            note = NoteStore.getNote(this.props.id);
        }

        return (
            React.createElement("div", {className: "col-md-8"}, 
                React.createElement(TextArea, {onSave: this.handleSave, id: this.props.id, noteText: note ? note.text : ''})
            )
        );
    }
});

module.exports = NoteCreationBox;

},{"../../actions/NoteActions.js":1,"../../stores/NoteStore.js":11,"./TextArea.jsx":10,"react":"react"}],7:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

var React = require('react');
var Note = require('./Note.jsx');

var NoteList = React.createClass({displayName: "NoteList",

    propTypes: {
        notes: React.PropTypes.array
    },
    getInitialState: function(){
        return {
            activeNoteId: null
        };
    },

    setActiveNote: function(id) {
        this.setState({
            activeNoteId: id
        });
    },

    render: function() {
        var self = this,
            notes = this.props.notes.concat().reverse();
        var noteNodes = notes.map(function (note) {
            return (
                React.createElement(Note, {key: note._id, active: self.state.activeNoteId === note._id, note: note, onEdit: self.props.onEdit, onSelect: self.setActiveNote})
            );
        });
        return (
            React.createElement("div", {className: "list-group"}, 
                noteNodes
            )
        );
    }
});

module.exports = NoteList;

},{"./Note.jsx":4,"react":"react"}],8:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

var React = require('react');
var NoteList = require('./NoteList.jsx');
var NoteStore = require('../../stores/NoteStore');

var NoteListBox = React.createClass({displayName: "NoteListBox",

    propTypes: {
        onAdd: React.PropTypes.func,
        onEdit: React.PropTypes.func
    },

    getInitialState: function(){
        return {
            notes: NoteStore.getNotes()
        };
    },

    componentDidMount: function() {
        this.unsubscribe = NoteStore.listen(this.onChange);
    },

    componentWillUnmount: function() {
        this.unsubscribe();
    },

    onChange: function(notes) {
        this.setState({
            notes: notes
        });
    },

    onAdd: function(event){
        event.preventDefault();
        this.props.onAdd();
        this.refs.noteList.setActiveNote(null);
    },

    render: function() {
        return (
            React.createElement("div", {className: "col-md-4"}, 
                React.createElement("div", {className: "centered"}, React.createElement("a", {href: "", onClick: this.onAdd}, "Add New")), 
                React.createElement(NoteList, {ref: "noteList", notes: this.state.notes, onEdit: this.props.onEdit})
            )
        );
    }
});

module.exports = NoteListBox;

},{"../../stores/NoteStore":11,"./NoteList.jsx":7,"react":"react"}],9:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

var React = require('react');

var RenderTest = React.createClass({displayName: "RenderTest",

	propTypes: {
		onEdit: React.PropTypes.func,
		onSelect: React.PropTypes.func
	},
	handleEdit: function(id, event) {
		event.preventDefault();
		this.props.onEdit(id);
		this.props.onSelect(id);
	},

	render: function() {
		// 返回NULL 什么也不输出，这个对DIALOG 设计上很有用.
		return null;
	}
});

module.exports = RenderTest;
},{"react":"react"}],10:[function(require,module,exports){
/**
 * @jsx React.DOM
 */

var React = require('react');
// var NoteStore = require('../../stores/NoteStore');

var TextArea = React.createClass({displayName: "TextArea",

    propTypes: {
        id: React.PropTypes.number,
        onSave: React.PropTypes.func
    },

    getInitialState: function() {
        return {
            noteText: ''
        };
    },

    componentWillReceiveProps: function(nextProps) {

        this.setState({
            noteText: nextProps.noteText
        });

        if (!nextProps.id) {
            this.refs.textArea.getDOMNode().focus();
        }
    },

    handleChange: function(event) {
        this.setState({
            noteText: event.target.value
        });
    },

    handleSave: function() {

        this.props.onSave(this.state.noteText, this.props.id);

        if (!this.props.id) {
            this.refs.textArea.getDOMNode().value = '';
            this.setState({
                noteText: ''
            });
        }
    },
    render: function() {
        return (
            React.createElement("div", null, 
                React.createElement("textarea", {className: "form-control", cols: "100", onChange: this.handleChange, ref: "textArea", rows: "20", value: this.state.noteText}), React.createElement("br", null), 
                React.createElement("input", {type: "button", className: "btn btn-success btn-lg", onClick: this.handleSave, value: "Save"})
            )
        );
    }
});

module.exports = TextArea;

},{"react":"react"}],11:[function(require,module,exports){
/**
 * Created by Sandeep on 06/10/14.
 */
var Reflux = require('reflux');
var NoteActions = require('../actions/NoteActions');
var _notes = [];

var NoteStore = Reflux.createStore({

	init: function() {
		this.listenTo(NoteActions.createNote, this.onCreate);
		this.listenTo(NoteActions.editNote, this.onEdit);
	},

	onCreate: function(note) {
		_notes.push(note);
		this.trigger(_notes);
	},

	onEdit: function(note) {
		for (var i = 0; i < _notes.length; i++) {
			if (_notes[i]._id === note._id) {
				_notes[i].text = note.text;
				this.trigger(_notes);
				break;
			}
		}
	},

	getNotes: function() {
		return _notes;
	},

	getNote: function(id) {
		for (var i = 0; i < _notes.length; i++) {
			if (_notes[i]._id === id) {
				return _notes[i];
			}
		}
	}

});

module.exports = NoteStore;

},{"../actions/NoteActions":1,"reflux":"reflux"}]},{},[2,3,4,5,6,7,8,9,10])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJHOlxccmVhY3RfbGVhcm5cXGFjdGlvbnNcXE5vdGVBY3Rpb25zLmpzIiwiRzpcXHJlYWN0X2xlYXJuXFxyZWFjdFxcQXBwLmpzeCIsIkc6XFxyZWFjdF9sZWFyblxccmVhY3RcXEJvb3RzdHJhcC5qc3giLCJHOlxccmVhY3RfbGVhcm5cXHJlYWN0XFxjb21wb25lbnRzXFxOb3RlLmpzeCIsIkc6XFxyZWFjdF9sZWFyblxccmVhY3RcXGNvbXBvbmVudHNcXE5vdGVBcHAuanN4IiwiRzpcXHJlYWN0X2xlYXJuXFxyZWFjdFxcY29tcG9uZW50c1xcTm90ZUNyZWF0aW9uQm94LmpzeCIsIkc6XFxyZWFjdF9sZWFyblxccmVhY3RcXGNvbXBvbmVudHNcXE5vdGVMaXN0LmpzeCIsIkc6XFxyZWFjdF9sZWFyblxccmVhY3RcXGNvbXBvbmVudHNcXE5vdGVMaXN0Qm94LmpzeCIsIkc6XFxyZWFjdF9sZWFyblxccmVhY3RcXGNvbXBvbmVudHNcXFJlbmRlci5qc3giLCJHOlxccmVhY3RfbGVhcm5cXHJlYWN0XFxjb21wb25lbnRzXFxUZXh0QXJlYS5qc3giLCJHOlxccmVhY3RfbGVhcm5cXHN0b3Jlc1xcTm90ZVN0b3JlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBRUEsR0FBRzs7QUFFSCxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRS9CLElBQUksV0FBVyxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUM7Q0FDdEMsWUFBWTtDQUNaLFVBQVU7QUFDWCxDQUFDLENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQzs7O0FDWDdCOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUgsNERB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TyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZCLEVBQUU7O0NBRUQsTUFBTSxFQUFFLFNBQVMsSUFBSSxFQUFFLENBQUM7RUFDdkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7R0FDdkMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUU7SUFDL0IsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzNCLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDckIsTUFBTTtJQUNOO0dBQ0Q7QUFDSCxFQUFFOztDQUVELFFBQVEsRUFBRSxXQUFXLENBQUM7RUFDckIsT0FBTyxNQUFNLENBQUM7QUFDaEIsRUFBRTs7Q0FFRCxPQUFPLEVBQUUsU0FBUyxFQUFFLEVBQUUsQ0FBQztFQUN0QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtHQUN2QyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssRUFBRSxFQUFFO0lBQ3pCLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pCO0dBQ0Q7QUFDSCxFQUFFOztBQUVGLENBQUMsQ0FBQyxDQUFDOztBQUVILE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxuICogQ3JlYXRlZCBieSBTYW5kZWVwIG9uIDA2LzEwLzE0LlxuICovXG5cbnZhciBSZWZsdXggPSByZXF1aXJlKCdyZWZsdXgnKTtcblxudmFyIE5vdGVBY3Rpb25zID0gUmVmbHV4LmNyZWF0ZUFjdGlvbnMoW1xuXHQnY3JlYXRlTm90ZScsXG5cdCdlZGl0Tm90ZSdcbl0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGVBY3Rpb25zO1xuIiwiLyoqXHJcbiAqIEBqc3ggUmVhY3QuRE9NXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEl0IHVzZXMgYDxOb3RlQXBwLz5gIHRvIHJlbmRlciB0aGUgYXBwIG9uIHRoZSBzZXJ2ZXIuIFlvdSBjYW4gY3JlYXRlIGlzb21vcnBoaWMgYXBwcyBieSByZW5kZXJpbmcgUmVhY3Qgb24gYm90aCBTZXJ2ZXJcclxuICogYW5kIENsaWVudC5cclxuICovXHJcblxyXG4vLyBmb3IgaWU4IFBvbHlmaWxscywgYnV0IHdlIHNob3VsZCd0IHJlcXVpcmUgaXQgaW4gcHJvamVjZXRcclxuLy8gd2Ugc2hvdWxkIHVzZSBncnVudCB0YXNrIHRvIGJ1aWxkIGllOGZpeCBtb2R1bGVzXHJcbi8vIHJlcXVpcmUoJ2VzNS1zaGltL2VzNS1zaGltJyk7XHJcbi8vIHJlcXVpcmUoJ2VzNS1zaGltL2VzNS1zaGFtJyk7XHJcbi8vIHJlcXVpcmUoJ2NvbnNvbGUtcG9seWZpbGwnKTtcclxuXHJcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbnZhciBOb3RlQXBwID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL05vdGVBcHAuanN4Jyk7XHJcbnZhciBBcHAgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgICAgICAgPGhlYWQgbGFuZz1cImVuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJhc2UgaHJlZj1cIi9cIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgY2hhclNldD1cInV0Zi04XCIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxtZXRhIGh0dHBFcXVpdj1cIlgtVUEtQ29tcGF0aWJsZVwiIGNvbnRlbnQ9XCJJRT1lZGdlXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MVwiLz5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVhY3QgTm90ZSBhcHA8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5rIGhyZWY9XCJjc3MvYm9vdHN0cmFwLmNzc1wiIHJlbD1cInN0eWxlc2hlZXRcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpbmsgaHJlZj1cImNzcy9hcHAuY3NzXCIgcmVsPVwic3R5bGVzaGVldFwiLz5cclxuICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgIDxib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDxOb3RlQXBwLz5cclxuICAgICAgICAgICAgICAgICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCIvanMvdmVuZG9yL3JlYWN0LmllOGZpeC5qc1wiPjwvc2NyaXB0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiIHNyYz1cIi9qcy92ZW5kb3IvcmVhY3QuanNcIj48L3NjcmlwdD5cclxuICAgICAgICAgICAgICAgICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCIvanMvYnJvd3NlcmlmeS9idW5kbGUuanNcIj48L3NjcmlwdD5cclxuICAgICAgICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICAgICAgPC9odG1sPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQXBwO1xyXG4iLCIvKipcbiAqIEBqc3ggUmVhY3QuRE9NXG4gKi9cblxuLyoqXG4gKiAgRm9yIHJlbmRlcmluZyB0aGUgYXBwIG9uIGNsaWVudCBzaWRlLlxuICovXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIEFwcCA9IHJlcXVpcmUoJy4vQXBwLmpzeCcpO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFJlYWN0LnJlbmRlcig8QXBwIC8+LCBkb2N1bWVudCk7XG4gICAgfTtcbn1cbiIsIi8qKlxyXG4gKiBAanN4IFJlYWN0LkRPTVxyXG4gKi9cclxuXHJcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcblxyXG52YXIgTm90ZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIHByb3BUeXBlczoge1xyXG4gICAgICAgIGFjdGl2ZTogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXHJcbiAgICAgICAgbm90ZTogUmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcclxuICAgICAgICBvbkVkaXQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgICAgIG9uU2VsZWN0OiBSZWFjdC5Qcm9wVHlwZXMuZnVuY1xyXG4gICAgfSxcclxuICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uKGlkLCBldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnByb3BzLm9uRWRpdChpZCk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChpZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBub3RlID0gdGhpcy5wcm9wcy5ub3RlO1xyXG5cclxuICAgICAgICB2YXIgdGl0bGUgPSBub3RlLnRleHQubGVuZ3RoID49IDIwID8gbm90ZS50ZXh0LnN1YnN0cmluZygwLCAyMCkgOiBub3RlLnRleHQ7XHJcblxyXG4gICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLnByb3BzLmFjdGl2ZSA/ICdhY3RpdmUnIDogbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzc05hbWU9eydsaXN0LWdyb3VwLWl0ZW0gJyArIGNsYXNzTmFtZX0gb25DbGljaz17dGhpcy5oYW5kbGVFZGl0LmJpbmQobnVsbCwgbm90ZS5faWQpfT57dGl0bGV9PC9hPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOb3RlO1xyXG4iLCIvKipcbiAqIEBqc3ggUmVhY3QuRE9NXG4gKi9cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBOb3RlTGlzdEJveCA9IHJlcXVpcmUoJy4vTm90ZUxpc3RCb3guanN4Jyk7XG52YXIgTm90ZUNyZWF0aW9uQm94ID0gcmVxdWlyZSgnLi9Ob3RlQ3JlYXRpb25Cb3guanN4Jyk7XG52YXIgUmVuZGVyID0gcmVxdWlyZSgnLi9SZW5kZXIuanN4Jyk7XG52YXIgTm90ZUFwcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogbnVsbFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBvbkVkaXQ6IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXJyZW50bHlFZGl0ZWQ6IGlkXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBvbkFkZDogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXJyZW50bHlFZGl0ZWQ6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IGhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVhY3QgTm90ZSBBcHA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlbmRlciAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8Tm90ZUxpc3RCb3ggb25FZGl0PXt0aGlzLm9uRWRpdH0gb25BZGQ9e3RoaXMub25BZGR9Lz5cbiAgICAgICAgICAgICAgICAgICAgPE5vdGVDcmVhdGlvbkJveCBpZD17dGhpcy5zdGF0ZS5jdXJyZW50bHlFZGl0ZWR9IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBOb3RlQXBwO1xuIiwiLyoqXG4gKiBAanN4IFJlYWN0LkRPTVxuICovXG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgVGV4dEFyZWEgPSByZXF1aXJlKCcuL1RleHRBcmVhLmpzeCcpO1xudmFyIE5vdGVBY3Rpb25zID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9Ob3RlQWN0aW9ucy5qcycpO1xudmFyIE5vdGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9Ob3RlU3RvcmUuanMnKTtcblxudmFyIE5vdGVDcmVhdGlvbkJveCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAgIHByb3BUeXBlczoge1xuICAgICAgICBpZDogUmVhY3QuUHJvcFR5cGVzLm51bWJlclxuICAgIH0sXG4gICAgaGFuZGxlU2F2ZTogZnVuY3Rpb24obm90ZVRleHQsIGlkKSB7XG5cbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICBOb3RlQWN0aW9ucy5lZGl0Tm90ZSh7XG4gICAgICAgICAgICAgICAgX2lkOiBpZCxcbiAgICAgICAgICAgICAgICB0ZXh0OiBub3RlVGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBOb3RlQWN0aW9ucy5jcmVhdGVOb3RlKHtcbiAgICAgICAgICAgICAgICBfaWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgdGV4dDogbm90ZVRleHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBub3RlO1xuXG4gICAgICAgIGlmKHRoaXMucHJvcHMuaWQpIHtcbiAgICAgICAgICAgIG5vdGUgPSBOb3RlU3RvcmUuZ2V0Tm90ZSh0aGlzLnByb3BzLmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC04XCI+XG4gICAgICAgICAgICAgICAgPFRleHRBcmVhIG9uU2F2ZT17dGhpcy5oYW5kbGVTYXZlfSBpZD17dGhpcy5wcm9wcy5pZH0gbm90ZVRleHQ9e25vdGUgPyBub3RlLnRleHQgOiAnJ30gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGVDcmVhdGlvbkJveDtcbiIsIi8qKlxuICogQGpzeCBSZWFjdC5ET01cbiAqL1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIE5vdGUgPSByZXF1aXJlKCcuL05vdGUuanN4Jyk7XG5cbnZhciBOb3RlTGlzdCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAgIHByb3BUeXBlczoge1xuICAgICAgICBub3RlczogUmVhY3QuUHJvcFR5cGVzLmFycmF5XG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY3RpdmVOb3RlSWQ6IG51bGxcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgc2V0QWN0aXZlTm90ZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhY3RpdmVOb3RlSWQ6IGlkXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBub3RlcyA9IHRoaXMucHJvcHMubm90ZXMuY29uY2F0KCkucmV2ZXJzZSgpO1xuICAgICAgICB2YXIgbm90ZU5vZGVzID0gbm90ZXMubWFwKGZ1bmN0aW9uIChub3RlKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxOb3RlIGtleT17bm90ZS5faWR9IGFjdGl2ZT17c2VsZi5zdGF0ZS5hY3RpdmVOb3RlSWQgPT09IG5vdGUuX2lkfSBub3RlPXtub3RlfSBvbkVkaXQ9e3NlbGYucHJvcHMub25FZGl0fSBvblNlbGVjdD17c2VsZi5zZXRBY3RpdmVOb3RlfSAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpc3QtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICB7bm90ZU5vZGVzfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gTm90ZUxpc3Q7XG4iLCIvKipcbiAqIEBqc3ggUmVhY3QuRE9NXG4gKi9cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBOb3RlTGlzdCA9IHJlcXVpcmUoJy4vTm90ZUxpc3QuanN4Jyk7XG52YXIgTm90ZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL05vdGVTdG9yZScpO1xuXG52YXIgTm90ZUxpc3RCb3ggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgICBwcm9wVHlwZXM6IHtcbiAgICAgICAgb25BZGQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgICAgICBvbkVkaXQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jXG4gICAgfSxcblxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vdGVzOiBOb3RlU3RvcmUuZ2V0Tm90ZXMoKVxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSBOb3RlU3RvcmUubGlzdGVuKHRoaXMub25DaGFuZ2UpO1xuICAgIH0sXG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9LFxuXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uKG5vdGVzKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbm90ZXM6IG5vdGVzXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBvbkFkZDogZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnByb3BzLm9uQWRkKCk7XG4gICAgICAgIHRoaXMucmVmcy5ub3RlTGlzdC5zZXRBY3RpdmVOb3RlKG51bGwpO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2VudGVyZWRcIj48YSBocmVmPVwiXCIgb25DbGljaz17dGhpcy5vbkFkZH0+QWRkIE5ldzwvYT48L2Rpdj5cbiAgICAgICAgICAgICAgICA8Tm90ZUxpc3QgcmVmPVwibm90ZUxpc3RcIiBub3Rlcz17dGhpcy5zdGF0ZS5ub3Rlc30gb25FZGl0PXt0aGlzLnByb3BzLm9uRWRpdH0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGVMaXN0Qm94O1xuIiwiLyoqXHJcbiAqIEBqc3ggUmVhY3QuRE9NXHJcbiAqL1xyXG5cclxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuXHJcbnZhciBSZW5kZXJUZXN0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG5cclxuXHRwcm9wVHlwZXM6IHtcclxuXHRcdG9uRWRpdDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcblx0XHRvblNlbGVjdDogUmVhY3QuUHJvcFR5cGVzLmZ1bmNcclxuXHR9LFxyXG5cdGhhbmRsZUVkaXQ6IGZ1bmN0aW9uKGlkLCBldmVudCkge1xyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHRoaXMucHJvcHMub25FZGl0KGlkKTtcclxuXHRcdHRoaXMucHJvcHMub25TZWxlY3QoaWQpO1xyXG5cdH0sXHJcblxyXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyDov5Tlm55OVUxMIOS7gOS5iOS5n+S4jei+k+WHuu+8jOi/meS4quWvuURJQUxPRyDorr7orqHkuIrlvojmnInnlKguXHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSZW5kZXJUZXN0O1xyXG4iLCIvKipcbiAqIEBqc3ggUmVhY3QuRE9NXG4gKi9cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbi8vIHZhciBOb3RlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvTm90ZVN0b3JlJyk7XG5cbnZhciBUZXh0QXJlYSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAgIHByb3BUeXBlczoge1xuICAgICAgICBpZDogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgICAgICAgb25TYXZlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuY1xuICAgIH0sXG5cbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm90ZVRleHQ6ICcnXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5leHRQcm9wcykge1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbm90ZVRleHQ6IG5leHRQcm9wcy5ub3RlVGV4dFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIW5leHRQcm9wcy5pZCkge1xuICAgICAgICAgICAgdGhpcy5yZWZzLnRleHRBcmVhLmdldERPTU5vZGUoKS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBub3RlVGV4dDogZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBoYW5kbGVTYXZlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB0aGlzLnByb3BzLm9uU2F2ZSh0aGlzLnN0YXRlLm5vdGVUZXh0LCB0aGlzLnByb3BzLmlkKTtcblxuICAgICAgICBpZiAoIXRoaXMucHJvcHMuaWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcy50ZXh0QXJlYS5nZXRET01Ob2RlKCkudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIG5vdGVUZXh0OiAnJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiBjb2xzPVwiMTAwXCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfSByZWY9XCJ0ZXh0QXJlYVwiIHJvd3M9XCIyMFwiIHZhbHVlPXt0aGlzLnN0YXRlLm5vdGVUZXh0fSA+PC90ZXh0YXJlYT48YnIvPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZ1wiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU2F2ZX0gdmFsdWU9XCJTYXZlXCIgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRleHRBcmVhO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IFNhbmRlZXAgb24gMDYvMTAvMTQuXG4gKi9cbnZhciBSZWZsdXggPSByZXF1aXJlKCdyZWZsdXgnKTtcbnZhciBOb3RlQWN0aW9ucyA9IHJlcXVpcmUoJy4uL2FjdGlvbnMvTm90ZUFjdGlvbnMnKTtcbnZhciBfbm90ZXMgPSBbXTtcblxudmFyIE5vdGVTdG9yZSA9IFJlZmx1eC5jcmVhdGVTdG9yZSh7XG5cblx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5saXN0ZW5UbyhOb3RlQWN0aW9ucy5jcmVhdGVOb3RlLCB0aGlzLm9uQ3JlYXRlKTtcblx0XHR0aGlzLmxpc3RlblRvKE5vdGVBY3Rpb25zLmVkaXROb3RlLCB0aGlzLm9uRWRpdCk7XG5cdH0sXG5cblx0b25DcmVhdGU6IGZ1bmN0aW9uKG5vdGUpIHtcblx0XHRfbm90ZXMucHVzaChub3RlKTtcblx0XHR0aGlzLnRyaWdnZXIoX25vdGVzKTtcblx0fSxcblxuXHRvbkVkaXQ6IGZ1bmN0aW9uKG5vdGUpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IF9ub3Rlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKF9ub3Rlc1tpXS5faWQgPT09IG5vdGUuX2lkKSB7XG5cdFx0XHRcdF9ub3Rlc1tpXS50ZXh0ID0gbm90ZS50ZXh0O1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoX25vdGVzKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdGdldE5vdGVzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gX25vdGVzO1xuXHR9LFxuXG5cdGdldE5vdGU6IGZ1bmN0aW9uKGlkKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBfbm90ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChfbm90ZXNbaV0uX2lkID09PSBpZCkge1xuXHRcdFx0XHRyZXR1cm4gX25vdGVzW2ldO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBOb3RlU3RvcmU7XG4iXX0=
